import{a as ee,b as Tt,c as Ot}from"./chunk-L46SLHAR.js";import{a as Vt,b as Lt,c as xe,d as be}from"./chunk-Z54TGAAY.js";import{a as Fe,b as xt,c as De,d as bt,e as Ge,f as vt,h as wt,i as J,j as St,k as It,l as Y,q as fe,r as te,s as ye,t as At,u as Et,v as Mt}from"./chunk-E4QVVGAS.js";import"./chunk-G4PY4TTK.js";import{e as ze,f as Ce,g as ie}from"./chunk-WZ5BO5RX.js";import{B as M,C as rt,D as at,G as z,H as Me,I as st,J as V,L as pt,M as ut,N,P as ce,Q as ct,S as j,T as me,U as mt,V as dt,W as _t,X as gt,aa as ht,ba as $,ca as de,da as ft,ea as _e,ga as Ct,ha as ge,ia as Ve,ja as yt,ka as Le,la as ke,ma as he,na as X,oa as Q,s as Ee,t as S,u as lt,x as U}from"./chunk-YYHTGHEG.js";import{$a as s,$b as y,Ab as T,Bb as O,Cb as A,Db as Z,Eb as H,Fb as E,Gb as R,Hb as pe,Ib as $e,Ka as p,La as f,N as Re,P as ae,Qa as Ue,Qb as Xe,Ta as ne,Va as je,Y as L,Ya as g,Yb as Je,Z as se,_a as w,ac as W,bb as Qe,bc as Ae,cb as B,db as oe,dc as Ye,ea as d,fa as _,fb as r,gb as a,hb as C,ib as K,ic as et,jb as P,kb as k,la as x,lb as b,ma as He,mb as h,nb as u,oa as We,pc as tt,qc as it,rb as Ze,rc as ue,sb as q,sc as nt,tb as F,tc as ot,ub as D,vb as Oe,vc as G,wb as m,xb as I,yb as le}from"./chunk-22NZ5CUR.js";import{a as qe}from"./chunk-GAL4ENT6.js";var qt=["container"],Rt=["focusInput"],Ht=["multiIn"],Wt=["multiContainer"],Ut=["ddBtn"],jt=["items"],Qt=["scroller"],Zt=["overlay"],$t=n=>({"p-autocomplete-token":!0,"p-focus":n}),kt=n=>({$implicit:n}),ve=n=>({height:n}),Ft=(n,l)=>({$implicit:n,options:l}),Xt=n=>({options:n}),Jt=()=>({}),Yt=(n,l,e)=>({"p-highlight":n,"p-focus":l,"p-disabled":e}),ei=(n,l)=>({$implicit:n,index:l});function ti(n,l){if(n&1){let e=b();r(0,"input",20,3),h("input",function(i){d(e);let o=u();return _(o.onInput(i))})("keydown",function(i){d(e);let o=u();return _(o.onKeyDown(i))})("change",function(i){d(e);let o=u();return _(o.onInputChange(i))})("focus",function(i){d(e);let o=u();return _(o.onInputFocus(i))})("blur",function(i){d(e);let o=u();return _(o.onInputBlur(i))})("paste",function(i){d(e);let o=u();return _(o.onInputPaste(i))})("keyup",function(i){d(e);let o=u();return _(o.onInputKeyUp(i))}),a()}if(n&2){let e,t=u();oe(t.inputStyleClass),s("autofocus",t.autofocus)("ngClass",t.inputClass)("ngStyle",t.inputStyle)("type",t.type)("autocomplete",t.autocomplete)("required",t.required)("name",t.name)("tabindex",t.disabled?-1:t.tabindex)("readonly",t.readonly)("disabled",t.disabled),w("value",t.inputValue())("id",t.inputId)("placeholder",t.placeholder)("size",t.size)("maxlength",t.maxlength)("aria-label",t.ariaLabel)("aria-labelledby",t.ariaLabelledBy)("aria-required",t.required)("aria-expanded",(e=t.overlayVisible)!==null&&e!==void 0?e:!1)("aria-controls",t.overlayVisible?t.id+"_list":null)("aria-activedescendant",t.focused?t.focusedOptionId:void 0)}}function ii(n,l){if(n&1){let e=b();r(0,"TimesIcon",23),h("click",function(){d(e);let i=u(2);return _(i.clear())}),a()}n&2&&(s("styleClass","p-autocomplete-clear-icon"),w("aria-hidden",!0))}function ni(n,l){}function oi(n,l){n&1&&g(0,ni,0,0,"ng-template")}function li(n,l){if(n&1){let e=b();r(0,"span",24),h("click",function(){d(e);let i=u(2);return _(i.clear())}),g(1,oi,1,0,null,17),a()}if(n&2){let e=u(2);w("aria-hidden",!0),p(),s("ngTemplateOutlet",e.clearIconTemplate)}}function ri(n,l){if(n&1&&(K(0),g(1,ii,1,2,"TimesIcon",21)(2,li,2,2,"span",22),P()),n&2){let e=u();p(),s("ngIf",!e.clearIconTemplate),p(),s("ngIf",e.clearIconTemplate)}}function ai(n,l){n&1&&k(0)}function si(n,l){if(n&1&&(r(0,"span",35),m(1),a()),n&2){let e=u().$implicit,t=u(2);p(),I(t.getMultipleLabel(e))}}function pi(n,l){n&1&&C(0,"TimesCircleIcon",36),n&2&&(s("styleClass","p-autocomplete-token-icon"),w("aria-hidden",!0))}function ui(n,l){}function ci(n,l){n&1&&g(0,ui,0,0,"ng-template")}function mi(n,l){if(n&1&&(r(0,"span",37),g(1,ci,1,0,null,17),a()),n&2){let e=u(3);w("aria-hidden",!0),p(),s("ngTemplateOutlet",e.removeIconTemplate)}}function di(n,l){if(n&1){let e=b();r(0,"li",29,5),g(2,ai,1,0,"ng-container",30)(3,si,2,1,"span",31),r(4,"span",32),h("click",function(i){let o=d(e).index,c=u(2);return _(c.readonly?"":c.removeOption(i,o))}),g(5,pi,1,2,"TimesCircleIcon",33)(6,mi,2,2,"span",34),a()()}if(n&2){let e=l.$implicit,t=l.index,i=u(2);s("ngClass",R(11,$t,i.focusedMultipleOptionIndex()===t)),w("id",i.id+"_multiple_option_"+t)("aria-label",i.getOptionLabel(e))("aria-setsize",i.modelValue().length)("aria-posinset",t+1)("aria-selected",!0),p(2),s("ngTemplateOutlet",i.selectedItemTemplate)("ngTemplateOutletContext",R(13,kt,e)),p(),s("ngIf",!i.selectedItemTemplate),p(2),s("ngIf",!i.removeIconTemplate),p(),s("ngIf",i.removeIconTemplate)}}function _i(n,l){if(n&1){let e=b();r(0,"ul",25,4),h("focus",function(i){d(e);let o=u();return _(o.onMultipleContainerFocus(i))})("blur",function(i){d(e);let o=u();return _(o.onMultipleContainerBlur(i))})("keydown",function(i){d(e);let o=u();return _(o.onMultipleContainerKeyDown(i))}),g(2,di,7,15,"li",26),r(3,"li",27)(4,"input",28,3),h("input",function(i){d(e);let o=u();return _(o.onInput(i))})("keydown",function(i){d(e);let o=u();return _(o.onKeyDown(i))})("change",function(i){d(e);let o=u();return _(o.onInputChange(i))})("focus",function(i){d(e);let o=u();return _(o.onInputFocus(i))})("blur",function(i){d(e);let o=u();return _(o.onInputBlur(i))})("paste",function(i){d(e);let o=u();return _(o.onInputPaste(i))})("keyup",function(i){d(e);let o=u();return _(o.onInputKeyUp(i))}),a()()()}if(n&2){let e,t=u();s("ngClass",t.multiContainerClass)("tabindex",-1),w("aria-orientation","horizontal")("aria-activedescendant",t.focused?t.focusedMultipleOptionId:void 0),p(2),s("ngForOf",t.modelValue()),p(2),oe(t.inputStyleClass),s("autofocus",t.autofocus)("ngClass",t.inputClass)("ngStyle",t.inputStyle)("autocomplete",t.autocomplete)("required",t.required)("tabindex",t.disabled?-1:t.tabindex)("readonly",t.readonly)("disabled",t.disabled),w("type",t.type)("id",t.inputId)("name",t.name)("placeholder",t.filled?null:t.placeholder)("size",t.size)("maxlength",t.maxlength)("aria-label",t.ariaLabel)("aria-labelledby",t.ariaLabelledBy)("aria-required",t.required)("aria-expanded",(e=t.overlayVisible)!==null&&e!==void 0?e:!1)("aria-controls",t.overlayVisible?t.id+"_list":null)("aria-activedescendant",t.focused?t.focusedOptionId:void 0)}}function gi(n,l){n&1&&C(0,"SpinnerIcon",40),n&2&&(s("styleClass","p-autocomplete-loader")("spin",!0),w("aria-hidden",!0))}function hi(n,l){}function fi(n,l){n&1&&g(0,hi,0,0,"ng-template")}function Ci(n,l){if(n&1&&(r(0,"span",41),g(1,fi,1,0,null,17),a()),n&2){let e=u(2);w("aria-hidden",!0),p(),s("ngTemplateOutlet",e.loadingIconTemplate)}}function yi(n,l){if(n&1&&(K(0),g(1,gi,1,3,"SpinnerIcon",38)(2,Ci,2,2,"span",39),P()),n&2){let e=u();p(),s("ngIf",!e.loadingIconTemplate),p(),s("ngIf",e.loadingIconTemplate)}}function xi(n,l){if(n&1&&C(0,"span",44),n&2){let e=u(2);s("ngClass",e.dropdownIcon),w("aria-hidden",!0)}}function bi(n,l){n&1&&C(0,"ChevronDownIcon")}function vi(n,l){}function wi(n,l){n&1&&g(0,vi,0,0,"ng-template")}function Si(n,l){if(n&1&&(K(0),g(1,bi,1,0,"ChevronDownIcon",12)(2,wi,1,0,null,17),P()),n&2){let e=u(2);p(),s("ngIf",!e.dropdownIconTemplate),p(),s("ngTemplateOutlet",e.dropdownIconTemplate)}}function Ii(n,l){if(n&1){let e=b();r(0,"button",42,6),h("click",function(i){d(e);let o=u();return _(o.handleDropdownClick(i))}),g(2,xi,1,2,"span",43)(3,Si,3,2,"ng-container",12),a()}if(n&2){let e=u();s("disabled",e.disabled),w("aria-label",e.dropdownAriaLabel)("tabindex",e.tabindex),p(2),s("ngIf",e.dropdownIcon),p(),s("ngIf",!e.dropdownIcon)}}function Ti(n,l){n&1&&k(0)}function Oi(n,l){n&1&&k(0)}function Ai(n,l){if(n&1&&g(0,Oi,1,0,"ng-container",30),n&2){let e=l.$implicit,t=l.options;u(2);let i=Oe(14);s("ngTemplateOutlet",i)("ngTemplateOutletContext",pe(2,Ft,e,t))}}function Ei(n,l){n&1&&k(0)}function Mi(n,l){if(n&1&&g(0,Ei,1,0,"ng-container",30),n&2){let e=l.options,t=u(3);s("ngTemplateOutlet",t.loaderTemplate)("ngTemplateOutletContext",R(2,Xt,e))}}function Vi(n,l){n&1&&(K(0),g(1,Mi,1,4,"ng-template",47),P())}function Li(n,l){if(n&1){let e=b();r(0,"p-scroller",45,7),h("onLazyLoad",function(i){d(e);let o=u();return _(o.onLazyLoad.emit(i))}),g(2,Ai,1,5,"ng-template",46)(3,Vi,2,0,"ng-container",12),a()}if(n&2){let e=u();B(R(8,ve,e.scrollHeight)),s("items",e.visibleOptions())("itemSize",e.virtualScrollItemSize||e._itemSize)("autoSize",!0)("lazy",e.lazy)("options",e.virtualScrollOptions),p(3),s("ngIf",e.loaderTemplate)}}function ki(n,l){n&1&&k(0)}function Fi(n,l){if(n&1&&(K(0),g(1,ki,1,0,"ng-container",30),P()),n&2){let e=u(),t=Oe(14);p(),s("ngTemplateOutlet",t)("ngTemplateOutletContext",pe(3,Ft,e.visibleOptions(),E(2,Jt)))}}function Di(n,l){if(n&1&&(r(0,"span"),m(1),a()),n&2){let e=u(2).$implicit,t=u(2);p(),I(t.getOptionGroupLabel(e.optionGroup))}}function Gi(n,l){n&1&&k(0)}function zi(n,l){if(n&1&&(K(0),r(1,"li",51),g(2,Di,2,1,"span",12)(3,Gi,1,0,"ng-container",30),a(),P()),n&2){let e=u(),t=e.$implicit,i=e.index,o=u().options,c=u();p(),s("ngStyle",R(5,ve,o.itemSize+"px")),w("id",c.id+"_"+c.getOptionIndex(i,o)),p(),s("ngIf",!c.groupTemplate),p(),s("ngTemplateOutlet",c.groupTemplate)("ngTemplateOutletContext",R(7,kt,t.optionGroup))}}function Ni(n,l){if(n&1&&(r(0,"span"),m(1),a()),n&2){let e=u(2).$implicit,t=u(2);p(),I(t.getOptionLabel(e))}}function Bi(n,l){n&1&&k(0)}function Ki(n,l){if(n&1){let e=b();K(0),r(1,"li",52),h("click",function(i){d(e);let o=u().$implicit,c=u(2);return _(c.onOptionSelect(i,o))})("mouseenter",function(i){d(e);let o=u().index,c=u().options,v=u();return _(v.onOptionMouseEnter(i,v.getOptionIndex(o,c)))}),g(2,Ni,2,1,"span",12)(3,Bi,1,0,"ng-container",30),a(),P()}if(n&2){let e=u(),t=e.$implicit,i=e.index,o=u().options,c=u();p(),s("ngStyle",R(12,ve,o.itemSize+"px"))("ngClass",$e(14,Yt,c.isSelected(t),c.focusedOptionIndex()===c.getOptionIndex(i,o),c.isOptionDisabled(t))),w("id",c.id+"_"+c.getOptionIndex(i,o))("aria-label",c.getOptionLabel(t))("aria-selected",c.isSelected(t))("aria-disabled",c.isOptionDisabled(t))("data-p-focused",c.focusedOptionIndex()===c.getOptionIndex(i,o))("aria-setsize",c.ariaSetSize)("aria-posinset",c.getAriaPosInset(c.getOptionIndex(i,o))),p(),s("ngIf",!c.itemTemplate),p(),s("ngTemplateOutlet",c.itemTemplate)("ngTemplateOutletContext",pe(18,ei,t,o.getOptions?o.getOptions(i):i))}}function Pi(n,l){if(n&1&&g(0,zi,4,9,"ng-container",12)(1,Ki,4,21,"ng-container",12),n&2){let e=l.$implicit,t=u(2);s("ngIf",t.isOptionGroup(e)),p(),s("ngIf",!t.isOptionGroup(e))}}function qi(n,l){if(n&1&&(K(0),m(1),P()),n&2){let e=u(3);p(),le(" ",e.searchResultMessageText," ")}}function Ri(n,l){n&1&&k(0,null,9)}function Hi(n,l){if(n&1&&(r(0,"li",53),g(1,qi,2,1,"ng-container",54)(2,Ri,2,0,"ng-container",17),a()),n&2){let e=u().options,t=u();s("ngStyle",R(4,ve,e.itemSize+"px")),p(),s("ngIf",!t.emptyTemplate)("ngIfElse",t.empty),p(),s("ngTemplateOutlet",t.emptyTemplate)}}function Wi(n,l){if(n&1&&(r(0,"ul",48,8),g(2,Pi,2,2,"ng-template",49)(3,Hi,3,6,"li",50),a()),n&2){let e=l.$implicit,t=l.options,i=u();B(t.contentStyle),s("ngClass",t.contentStyleClass),w("id",i.id+"_list")("aria-label",i.listLabel),p(2),s("ngForOf",e),p(),s("ngIf",!e||e&&e.length===0&&i.showEmptyMessage)}}function Ui(n,l){n&1&&k(0)}var ji={provide:pt,useExisting:Re(()=>Ke),multi:!0},Ke=(()=>{class n{document;el;renderer;cd;config;overlayService;zone;minLength=1;delay=300;style;panelStyle;styleClass;panelStyleClass;inputStyle;inputId;inputStyleClass;placeholder;readonly;disabled;scrollHeight="200px";lazy=!1;virtualScroll;virtualScrollItemSize;virtualScrollOptions;maxlength;name;required;size;appendTo;autoHighlight;forceSelection;type="text";autoZIndex=!0;baseZIndex=0;ariaLabel;dropdownAriaLabel;ariaLabelledBy;dropdownIcon;unique=!0;group;completeOnFocus=!1;showClear=!1;field;dropdown;showEmptyMessage=!0;dropdownMode="blank";multiple;tabindex;dataKey;emptyMessage;showTransitionOptions=".12s cubic-bezier(0, 0, 0.2, 1)";hideTransitionOptions=".1s linear";autofocus;autocomplete="off";optionGroupChildren="items";optionGroupLabel="label";overlayOptions;get suggestions(){return this._suggestions()}set suggestions(e){this._suggestions.set(e),this.handleSuggestionsChange()}get itemSize(){return this._itemSize}set itemSize(e){this._itemSize=e,console.warn("The itemSize property is deprecated, use virtualScrollItemSize property instead.")}optionLabel;optionValue;id;searchMessage;emptySelectionMessage;selectionMessage;autoOptionFocus=!1;selectOnFocus;searchLocale;optionDisabled;focusOnHover;variant="outlined";completeMethod=new x;onSelect=new x;onUnselect=new x;onFocus=new x;onBlur=new x;onDropdownClick=new x;onClear=new x;onKeyUp=new x;onShow=new x;onHide=new x;onLazyLoad=new x;containerEL;inputEL;multiInputEl;multiContainerEL;dropdownButton;itemsViewChild;scroller;overlayViewChild;templates;_itemSize;itemsWrapper;itemTemplate;emptyTemplate;headerTemplate;footerTemplate;selectedItemTemplate;groupTemplate;loaderTemplate;removeIconTemplate;loadingIconTemplate;clearIconTemplate;dropdownIconTemplate;value;_suggestions=ne(null);onModelChange=()=>{};onModelTouched=()=>{};timeout;overlayVisible;suggestionsUpdated;highlightOption;highlightOptionChanged;focused=!1;_filled;get filled(){return this._filled}set filled(e){this._filled=e}loading;scrollHandler;listId;searchTimeout;dirty=!1;modelValue=ne(null);focusedMultipleOptionIndex=ne(-1);focusedOptionIndex=ne(-1);visibleOptions=Ae(()=>this.group?this.flatOptions(this._suggestions()):this._suggestions()||[]);inputValue=Ae(()=>{let e=this.modelValue(),t=this.getSelectedOption(e);if(e)if(typeof e=="object"||this.optionValue){let i=this.getOptionLabel(t);return i??e}else return e;else return""});get focusedMultipleOptionId(){return this.focusedMultipleOptionIndex()!==-1?`${this.id}_multiple_option_${this.focusedMultipleOptionIndex()}`:null}get focusedOptionId(){return this.focusedOptionIndex()!==-1?`${this.id}_${this.focusedOptionIndex()}`:null}get containerClass(){return{"p-autocomplete p-component p-inputwrapper":!0,"p-disabled":this.disabled,"p-focus":this.focused,"p-autocomplete-dd":this.dropdown,"p-autocomplete-multiple":this.multiple,"p-inputwrapper-focus":this.focused,"p-overlay-open":this.overlayVisible}}get multiContainerClass(){return{"p-autocomplete-multiple-container p-component p-inputtext":!0,"p-variant-filled":this.variant==="filled"||this.config.inputStyle()==="filled"}}get panelClass(){return{"p-autocomplete-panel p-component":!0,"p-input-filled":this.config.inputStyle()==="filled","p-ripple-disabled":this.config.ripple===!1}}get panelStyles(){return qe({"max-height":this.virtualScroll?"auto":this.scrollHeight},this.panelStyle)}get inputClass(){return{"p-autocomplete-input p-inputtext p-component":!this.multiple,"p-autocomplete-dd-input":this.dropdown,"p-variant-filled":this.variant==="filled"||this.config.inputStyle()==="filled"}}get searchResultMessageText(){return S.isNotEmpty(this.visibleOptions())&&this.overlayVisible?this.searchMessageText.replaceAll("{0}",this.visibleOptions().length):this.emptySearchMessageText}get searchMessageText(){return this.searchMessage||this.config.translation.searchMessage||""}get emptySearchMessageText(){return this.emptyMessage||this.config.translation.emptySearchMessage||""}get selectionMessageText(){return this.selectionMessage||this.config.translation.selectionMessage||""}get emptySelectionMessageText(){return this.emptySelectionMessage||this.config.translation.emptySelectionMessage||""}get selectedMessageText(){return this.hasSelectedOption()?this.selectionMessageText.replaceAll("{0}",this.multiple?this.modelValue().length:"1"):this.emptySelectionMessageText}get ariaSetSize(){return this.visibleOptions().filter(e=>!this.isOptionGroup(e)).length}get listLabel(){return this.config.getTranslation(st.ARIA).listLabel}get virtualScrollerDisabled(){return!this.virtualScroll}get optionValueSelected(){return typeof this.modelValue()=="string"&&this.optionValue}get isVisibleClearIcon(){return this.modelValue()!=null&&this.hasSelectedOption()&&this.showClear&&!this.disabled&&!this.loading}constructor(e,t,i,o,c,v,Kt){this.document=e,this.el=t,this.renderer=i,this.cd=o,this.config=c,this.overlayService=v,this.zone=Kt,Ye(()=>{this.filled=S.isNotEmpty(this.modelValue())})}ngOnInit(){this.id=this.id||lt(),this.cd.detectChanges()}ngAfterViewChecked(){this.suggestionsUpdated&&this.overlayViewChild&&this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.overlayViewChild&&this.overlayViewChild.alignOverlay()},1),this.suggestionsUpdated=!1})}ngAfterContentInit(){this.templates.forEach(e=>{switch(e.getType()){case"item":this.itemTemplate=e.template;break;case"group":this.groupTemplate=e.template;break;case"selectedItem":this.selectedItemTemplate=e.template;break;case"header":this.headerTemplate=e.template;break;case"empty":this.emptyTemplate=e.template;break;case"footer":this.footerTemplate=e.template;break;case"loader":this.loaderTemplate=e.template;break;case"removetokenicon":this.removeIconTemplate=e.template;break;case"loadingicon":this.loadingIconTemplate=e.template;break;case"clearicon":this.clearIconTemplate=e.template;break;case"dropdownicon":this.dropdownIconTemplate=e.template;break;default:this.itemTemplate=e.template;break}})}handleSuggestionsChange(){if(this.loading){this._suggestions().length>0||this.showEmptyMessage?this.show():this.emptyTemplate?this.show():this.hide();let e=this.overlayVisible&&this.autoOptionFocus?this.findFirstFocusedOptionIndex():-1;this.focusedOptionIndex.set(e),this.suggestionsUpdated=!0,this.loading=!1,this.cd.markForCheck()}}flatOptions(e){return(e||[]).reduce((t,i,o)=>{t.push({optionGroup:i,group:!0,index:o});let c=this.getOptionGroupChildren(i);return c&&c.forEach(v=>t.push(v)),t},[])}isOptionGroup(e){return this.optionGroupLabel&&e.optionGroup&&e.group}findFirstOptionIndex(){return this.visibleOptions().findIndex(e=>this.isValidOption(e))}findLastOptionIndex(){return S.findLastIndex(this.visibleOptions(),e=>this.isValidOption(e))}findFirstFocusedOptionIndex(){let e=this.findSelectedOptionIndex();return e<0?this.findFirstOptionIndex():e}findLastFocusedOptionIndex(){let e=this.findSelectedOptionIndex();return e<0?this.findLastOptionIndex():e}findSelectedOptionIndex(){return this.hasSelectedOption()?this.visibleOptions().findIndex(e=>this.isValidSelectedOption(e)):-1}findNextOptionIndex(e){let t=e<this.visibleOptions().length-1?this.visibleOptions().slice(e+1).findIndex(i=>this.isValidOption(i)):-1;return t>-1?t+e+1:e}findPrevOptionIndex(e){let t=e>0?S.findLastIndex(this.visibleOptions().slice(0,e),i=>this.isValidOption(i)):-1;return t>-1?t:e}isValidSelectedOption(e){return this.isValidOption(e)&&this.isSelected(e)}isValidOption(e){return e&&!(this.isOptionDisabled(e)||this.isOptionGroup(e))}isOptionDisabled(e){return this.optionDisabled?S.resolveFieldData(e,this.optionDisabled):!1}isSelected(e){return this.multiple?this.unique?this.modelValue()?.find(t=>S.equals(t,this.getOptionValue(e),this.equalityKey())):!1:S.equals(this.modelValue(),this.getOptionValue(e),this.equalityKey())}isOptionMatched(e,t){return this.isValidOption(e)&&this.getOptionLabel(e).toLocaleLowerCase(this.searchLocale)===t.toLocaleLowerCase(this.searchLocale)}isInputClicked(e){return e.target===this.inputEL.nativeElement}isDropdownClicked(e){return this.dropdownButton?.nativeElement?e.target===this.dropdownButton.nativeElement||this.dropdownButton.nativeElement.contains(e.target):!1}equalityKey(){return this.dataKey}onContainerClick(e){this.disabled||this.loading||this.isInputClicked(e)||this.isDropdownClicked(e)||(!this.overlayViewChild||!this.overlayViewChild.overlayViewChild?.nativeElement.contains(e.target))&&V.focus(this.inputEL.nativeElement)}handleDropdownClick(e){let t;this.overlayVisible?this.hide(!0):(V.focus(this.inputEL.nativeElement),t=this.inputEL.nativeElement.value,this.dropdownMode==="blank"?this.search(e,"","dropdown"):this.dropdownMode==="current"&&this.search(e,t,"dropdown")),this.onDropdownClick.emit({originalEvent:e,query:t})}onInput(e){this.searchTimeout&&clearTimeout(this.searchTimeout);let t=e.target.value;this.maxlength!==null&&(t=t.split("").slice(0,this.maxlength).join("")),!this.multiple&&!this.forceSelection&&this.updateModel(t),t.length===0&&!this.multiple&&!this.completeOnFocus?(this.onClear.emit(),this.hide()):t.length>=this.minLength?(this.focusedOptionIndex.set(-1),this.searchTimeout=setTimeout(()=>{this.search(e,t,"input")},this.delay)):this.hide()}onInputChange(e){if(this.forceSelection){let t=!1;if(this.visibleOptions()){let i=this.visibleOptions().find(o=>this.isOptionMatched(o,this.inputEL.nativeElement.value||""));i!==void 0&&(t=!0,!this.isSelected(i)&&this.onOptionSelect(e,i))}t||(this.inputEL.nativeElement.value="",!this.multiple&&this.updateModel(null))}}onInputFocus(e){if(this.disabled)return;!this.dirty&&this.completeOnFocus&&(this.search(e,e.target.value,"focus"),this.show()),this.dirty=!0,this.focused=!0;let t=this.focusedOptionIndex()!==-1?this.focusedOptionIndex():this.overlayVisible&&this.autoOptionFocus?this.findFirstFocusedOptionIndex():-1;this.focusedOptionIndex.set(t),this.overlayVisible&&this.scrollInView(this.focusedOptionIndex()),this.onFocus.emit(e)}onMultipleContainerFocus(e){this.disabled||(this.focused=!0)}onMultipleContainerBlur(e){this.focusedMultipleOptionIndex.set(-1),this.focused=!1}onMultipleContainerKeyDown(e){if(this.disabled){e.preventDefault();return}switch(e.code){case"ArrowLeft":this.onArrowLeftKeyOnMultiple(e);break;case"ArrowRight":this.onArrowRightKeyOnMultiple(e);break;case"Backspace":this.onBackspaceKeyOnMultiple(e);break;default:break}}onInputBlur(e){this.dirty=!1,this.focused=!1,this.focusedOptionIndex.set(-1),this.onModelTouched(),this.onBlur.emit(e)}onInputPaste(e){this.onKeyDown(e)}onInputKeyUp(e){this.onKeyUp.emit(e)}onKeyDown(e){if(this.disabled){e.preventDefault();return}switch(e.code){case"ArrowDown":this.onArrowDownKey(e);break;case"ArrowUp":this.onArrowUpKey(e);break;case"ArrowLeft":this.onArrowLeftKey(e);break;case"ArrowRight":this.onArrowRightKey(e);break;case"Home":this.onHomeKey(e);break;case"End":this.onEndKey(e);break;case"PageDown":this.onPageDownKey(e);break;case"PageUp":this.onPageUpKey(e);break;case"Enter":case"NumpadEnter":this.onEnterKey(e);break;case"Escape":this.onEscapeKey(e);break;case"Tab":this.onTabKey(e);break;case"Backspace":this.onBackspaceKey(e);break;case"ShiftLeft":case"ShiftRight":break;default:break}}onArrowDownKey(e){if(!this.overlayVisible)return;let t=this.focusedOptionIndex()!==-1?this.findNextOptionIndex(this.focusedOptionIndex()):this.findFirstFocusedOptionIndex();this.changeFocusedOptionIndex(e,t),e.preventDefault(),e.stopPropagation()}onArrowUpKey(e){if(this.overlayVisible)if(e.altKey)this.focusedOptionIndex()!==-1&&this.onOptionSelect(e,this.visibleOptions()[this.focusedOptionIndex()]),this.overlayVisible&&this.hide(),e.preventDefault();else{let t=this.focusedOptionIndex()!==-1?this.findPrevOptionIndex(this.focusedOptionIndex()):this.findLastFocusedOptionIndex();this.changeFocusedOptionIndex(e,t),e.preventDefault(),e.stopPropagation()}}onArrowLeftKey(e){let t=e.currentTarget;this.focusedOptionIndex.set(-1),this.multiple&&(S.isEmpty(t.value)&&this.hasSelectedOption()?(V.focus(this.multiContainerEL.nativeElement),this.focusedMultipleOptionIndex.set(this.modelValue().length)):e.stopPropagation())}onArrowRightKey(e){this.focusedOptionIndex.set(-1),this.multiple&&e.stopPropagation()}onHomeKey(e){let{currentTarget:t}=e,i=t.value.length;t.setSelectionRange(0,e.shiftKey?i:0),this.focusedOptionIndex.set(-1),e.preventDefault()}onEndKey(e){let{currentTarget:t}=e,i=t.value.length;t.setSelectionRange(e.shiftKey?0:i,i),this.focusedOptionIndex.set(-1),e.preventDefault()}onPageDownKey(e){this.scrollInView(this.visibleOptions().length-1),e.preventDefault()}onPageUpKey(e){this.scrollInView(0),e.preventDefault()}onEnterKey(e){this.overlayVisible?(this.focusedOptionIndex()!==-1&&(this.onOptionSelect(e,this.visibleOptions()[this.focusedOptionIndex()]),e.preventDefault()),this.hide()):this.onArrowDownKey(e)}onEscapeKey(e){this.overlayVisible&&this.hide(!0),e.preventDefault()}onTabKey(e){this.focusedOptionIndex()!==-1&&this.onOptionSelect(e,this.visibleOptions()[this.focusedOptionIndex()]),this.overlayVisible&&this.hide()}onBackspaceKey(e){if(this.multiple){if(S.isNotEmpty(this.modelValue())&&!this.inputEL.nativeElement.value){let t=this.modelValue()[this.modelValue().length-1],i=this.modelValue().slice(0,-1);this.updateModel(i),this.onUnselect.emit({originalEvent:e,value:t})}e.stopPropagation()}!this.multiple&&this.showClear&&this.findSelectedOptionIndex()!=-1&&this.clear()}onArrowLeftKeyOnMultiple(e){let t=this.focusedMultipleOptionIndex()<1?0:this.focusedMultipleOptionIndex()-1;this.focusedMultipleOptionIndex.set(t)}onArrowRightKeyOnMultiple(e){let t=this.focusedMultipleOptionIndex();t++,this.focusedMultipleOptionIndex.set(t),t>this.modelValue().length-1&&(this.focusedMultipleOptionIndex.set(-1),V.focus(this.inputEL.nativeElement))}onBackspaceKeyOnMultiple(e){this.focusedMultipleOptionIndex()!==-1&&this.removeOption(e,this.focusedMultipleOptionIndex())}onOptionSelect(e,t,i=!0){let o=this.getOptionValue(t);this.multiple?(this.inputEL.nativeElement.value="",this.isSelected(t)||this.updateModel([...this.modelValue()||[],o])):this.updateModel(o),this.onSelect.emit({originalEvent:e,value:t}),i&&this.hide(!0)}onOptionMouseEnter(e,t){this.focusOnHover&&this.changeFocusedOptionIndex(e,t)}search(e,t,i){t!=null&&(i==="input"&&t.trim().length<this.minLength||(this.loading=!0,this.completeMethod.emit({originalEvent:e,query:t})))}removeOption(e,t){e.stopPropagation();let i=this.modelValue()[t],o=this.modelValue().filter((c,v)=>v!==t).map(c=>this.getOptionValue(c));this.updateModel(o),this.onUnselect.emit({originalEvent:e,value:i}),V.focus(this.inputEL.nativeElement)}updateModel(e){this.value=e,this.modelValue.set(e),this.onModelChange(e),this.updateInputValue(),this.cd.markForCheck()}updateInputValue(){this.inputEL&&this.inputEL.nativeElement&&(this.multiple?this.inputEL.nativeElement.value="":this.inputEL.nativeElement.value=this.inputValue())}autoUpdateModel(){if((this.selectOnFocus||this.autoHighlight)&&this.autoOptionFocus&&!this.hasSelectedOption()){let e=this.findFirstFocusedOptionIndex();this.focusedOptionIndex.set(e),this.onOptionSelect(null,this.visibleOptions()[this.focusedOptionIndex()],!1)}}scrollInView(e=-1){let t=e!==-1?`${this.id}_${e}`:this.focusedOptionId;if(this.itemsViewChild&&this.itemsViewChild.nativeElement){let i=V.findSingle(this.itemsViewChild.nativeElement,`li[id="${t}"]`);i?i.scrollIntoView&&i.scrollIntoView({block:"nearest",inline:"nearest"}):this.virtualScrollerDisabled||setTimeout(()=>{this.virtualScroll&&this.scroller?.scrollToIndex(e!==-1?e:this.focusedOptionIndex())},0)}}changeFocusedOptionIndex(e,t){this.focusedOptionIndex()!==t&&(this.focusedOptionIndex.set(t),this.scrollInView(),this.selectOnFocus&&this.onOptionSelect(e,this.visibleOptions()[t],!1))}show(e=!1){this.dirty=!0,this.overlayVisible=!0;let t=this.focusedOptionIndex()!==-1?this.focusedOptionIndex():this.autoOptionFocus?this.findFirstFocusedOptionIndex():-1;this.focusedOptionIndex.set(t),e&&V.focus(this.inputEL.nativeElement),e&&V.focus(this.inputEL.nativeElement),this.onShow.emit(),this.cd.markForCheck()}hide(e=!1){let t=()=>{this.dirty=e,this.overlayVisible=!1,this.focusedOptionIndex.set(-1),e&&V.focus(this.inputEL.nativeElement),this.onHide.emit(),this.cd.markForCheck()};this.virtualScroll&&this.scroller.onScrollChange(event),setTimeout(()=>{t()},0)}clear(){this.updateModel(null),this.inputEL.nativeElement.value="",this.onClear.emit()}writeValue(e){this.value=e,this.modelValue.set(e),this.updateInputValue(),this.cd.markForCheck()}hasSelectedOption(){return S.isNotEmpty(this.modelValue())}getAriaPosInset(e){return(this.optionGroupLabel?e-this.visibleOptions().slice(0,e).filter(t=>this.isOptionGroup(t)).length:e)+1}getOptionLabel(e){return this.field||this.optionLabel?S.resolveFieldData(e,this.field||this.optionLabel):e&&e.label!=null?e.label:e}getOptionValue(e){return this.optionValue?S.resolveFieldData(e,this.optionValue):e}getOptionIndex(e,t){return this.virtualScrollerDisabled?e:t&&t.getItemOptions(e).index}getOptionGroupLabel(e){return this.optionGroupLabel?S.resolveFieldData(e,this.optionGroupLabel):e&&e.label!=null?e.label:e}getOptionGroupChildren(e){return this.optionGroupChildren?S.resolveFieldData(e,this.optionGroupChildren):e.items}getSelectedOption(e){return this.optionValue?(this.suggestions||[]).find(t=>S.resolveFieldData(t,this.optionValue)===e):e}getMultipleLabel(e){let t=this.getSelectedOption(e);return this.getOptionLabel(t)}registerOnChange(e){this.onModelChange=e}registerOnTouched(e){this.onModelTouched=e}setDisabledState(e){this.disabled=e,this.cd.markForCheck()}onOverlayAnimationStart(e){if(e.toState==="visible"&&(this.itemsWrapper=V.findSingle(this.overlayViewChild.overlayViewChild?.nativeElement,this.virtualScroll?".p-scroller":".p-autocomplete-panel"),this.virtualScroll&&(this.scroller?.setContentEl(this.itemsViewChild?.nativeElement),this.scroller.viewInit()),this.visibleOptions()&&this.visibleOptions().length))if(this.virtualScroll){let t=this.modelValue()?this.focusedOptionIndex():-1;t!==-1&&this.scroller?.scrollToIndex(t)}else{let t=V.findSingle(this.itemsWrapper,".p-autocomplete-item.p-highlight");t&&t.scrollIntoView({block:"nearest",inline:"center"})}}ngOnDestroy(){this.scrollHandler&&(this.scrollHandler.destroy(),this.scrollHandler=null)}static \u0275fac=function(t){return new(t||n)(f(et),f(We),f(Ue),f(Je),f(at),f(rt),f(He))};static \u0275cmp=L({type:n,selectors:[["p-autoComplete"]],contentQueries:function(t,i,o){if(t&1&&Ze(o,z,4),t&2){let c;F(c=D())&&(i.templates=c)}},viewQuery:function(t,i){if(t&1&&(q(qt,5),q(Rt,5),q(Ht,5),q(Wt,5),q(Ut,5),q(jt,5),q(Qt,5),q(Zt,5)),t&2){let o;F(o=D())&&(i.containerEL=o.first),F(o=D())&&(i.inputEL=o.first),F(o=D())&&(i.multiInputEl=o.first),F(o=D())&&(i.multiContainerEL=o.first),F(o=D())&&(i.dropdownButton=o.first),F(o=D())&&(i.itemsViewChild=o.first),F(o=D())&&(i.scroller=o.first),F(o=D())&&(i.overlayViewChild=o.first)}},hostAttrs:[1,"p-element","p-inputwrapper"],hostVars:6,hostBindings:function(t,i){t&2&&Qe("p-inputwrapper-filled",i.filled)("p-inputwrapper-focus",i.focused&&!i.disabled||i.autofocus||i.overlayVisible)("p-autocomplete-clearable",i.showClear&&!i.disabled)},inputs:{minLength:[2,"minLength","minLength",W],delay:[2,"delay","delay",W],style:"style",panelStyle:"panelStyle",styleClass:"styleClass",panelStyleClass:"panelStyleClass",inputStyle:"inputStyle",inputId:"inputId",inputStyleClass:"inputStyleClass",placeholder:"placeholder",readonly:[2,"readonly","readonly",y],disabled:[2,"disabled","disabled",y],scrollHeight:"scrollHeight",lazy:[2,"lazy","lazy",y],virtualScroll:[2,"virtualScroll","virtualScroll",y],virtualScrollItemSize:[2,"virtualScrollItemSize","virtualScrollItemSize",W],virtualScrollOptions:"virtualScrollOptions",maxlength:[2,"maxlength","maxlength",e=>W(e,null)],name:"name",required:[2,"required","required",y],size:[2,"size","size",W],appendTo:"appendTo",autoHighlight:[2,"autoHighlight","autoHighlight",y],forceSelection:[2,"forceSelection","forceSelection",y],type:"type",autoZIndex:[2,"autoZIndex","autoZIndex",y],baseZIndex:[2,"baseZIndex","baseZIndex",W],ariaLabel:"ariaLabel",dropdownAriaLabel:"dropdownAriaLabel",ariaLabelledBy:"ariaLabelledBy",dropdownIcon:"dropdownIcon",unique:[2,"unique","unique",y],group:[2,"group","group",y],completeOnFocus:[2,"completeOnFocus","completeOnFocus",y],showClear:[2,"showClear","showClear",y],field:"field",dropdown:[2,"dropdown","dropdown",y],showEmptyMessage:[2,"showEmptyMessage","showEmptyMessage",y],dropdownMode:"dropdownMode",multiple:[2,"multiple","multiple",y],tabindex:[2,"tabindex","tabindex",W],dataKey:"dataKey",emptyMessage:"emptyMessage",showTransitionOptions:"showTransitionOptions",hideTransitionOptions:"hideTransitionOptions",autofocus:[2,"autofocus","autofocus",y],autocomplete:"autocomplete",optionGroupChildren:"optionGroupChildren",optionGroupLabel:"optionGroupLabel",overlayOptions:"overlayOptions",suggestions:"suggestions",itemSize:"itemSize",optionLabel:"optionLabel",optionValue:"optionValue",id:"id",searchMessage:"searchMessage",emptySelectionMessage:"emptySelectionMessage",selectionMessage:"selectionMessage",autoOptionFocus:[2,"autoOptionFocus","autoOptionFocus",y],selectOnFocus:[2,"selectOnFocus","selectOnFocus",y],searchLocale:[2,"searchLocale","searchLocale",y],optionDisabled:"optionDisabled",focusOnHover:[2,"focusOnHover","focusOnHover",y],variant:"variant"},outputs:{completeMethod:"completeMethod",onSelect:"onSelect",onUnselect:"onUnselect",onFocus:"onFocus",onBlur:"onBlur",onDropdownClick:"onDropdownClick",onClear:"onClear",onKeyUp:"onKeyUp",onShow:"onShow",onHide:"onHide",onLazyLoad:"onLazyLoad"},features:[Z([ji]),je],decls:18,vars:24,consts:[["container",""],["overlay",""],["buildInItems",""],["focusInput",""],["multiContainer",""],["token",""],["ddBtn",""],["scroller",""],["items",""],["empty",""],[3,"click","ngClass","ngStyle"],["pAutoFocus","","aria-autocomplete","list","role","combobox",3,"autofocus","ngClass","ngStyle","class","type","autocomplete","required","name","tabindex","readonly","disabled","input","keydown","change","focus","blur","paste","keyup",4,"ngIf"],[4,"ngIf"],["role","listbox",3,"ngClass","tabindex","focus","blur","keydown",4,"ngIf"],["type","button","pButton","","class","p-autocomplete-dropdown p-button-icon-only","pRipple","",3,"disabled","click",4,"ngIf"],[3,"visibleChange","onAnimationStart","onHide","visible","options","target","appendTo","showTransitionOptions","hideTransitionOptions"],[3,"ngClass","ngStyle"],[4,"ngTemplateOutlet"],[3,"items","style","itemSize","autoSize","lazy","options","onLazyLoad",4,"ngIf"],["role","status","aria-live","polite",1,"p-hidden-accessible"],["pAutoFocus","","aria-autocomplete","list","role","combobox",3,"input","keydown","change","focus","blur","paste","keyup","autofocus","ngClass","ngStyle","type","autocomplete","required","name","tabindex","readonly","disabled"],[3,"styleClass","click",4,"ngIf"],["class","p-autocomplete-clear-icon",3,"click",4,"ngIf"],[3,"click","styleClass"],[1,"p-autocomplete-clear-icon",3,"click"],["role","listbox",3,"focus","blur","keydown","ngClass","tabindex"],["role","option",3,"ngClass",4,"ngFor","ngForOf"],["role","option",1,"p-autocomplete-input-token"],["pAutoFocus","","role","combobox","aria-autocomplete","list",3,"input","keydown","change","focus","blur","paste","keyup","autofocus","ngClass","ngStyle","autocomplete","required","tabindex","readonly","disabled"],["role","option",3,"ngClass"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["class","p-autocomplete-token-label",4,"ngIf"],[1,"p-autocomplete-token-icon",3,"click"],[3,"styleClass",4,"ngIf"],["class","p-autocomplete-token-icon",4,"ngIf"],[1,"p-autocomplete-token-label"],[3,"styleClass"],[1,"p-autocomplete-token-icon"],[3,"styleClass","spin",4,"ngIf"],["class","p-autocomplete-loader pi-spin ",4,"ngIf"],[3,"styleClass","spin"],[1,"p-autocomplete-loader","pi-spin"],["type","button","pButton","","pRipple","",1,"p-autocomplete-dropdown","p-button-icon-only",3,"click","disabled"],[3,"ngClass",4,"ngIf"],[3,"ngClass"],[3,"onLazyLoad","items","itemSize","autoSize","lazy","options"],["pTemplate","content"],["pTemplate","loader"],["role","listbox",1,"p-autocomplete-items",3,"ngClass"],["ngFor","",3,"ngForOf"],["class","p-autocomplete-empty-message","role","option",3,"ngStyle",4,"ngIf"],["role","option",1,"p-autocomplete-item-group",3,"ngStyle"],["pRipple","","role","option",1,"p-autocomplete-item",3,"click","mouseenter","ngStyle","ngClass"],["role","option",1,"p-autocomplete-empty-message",3,"ngStyle"],[4,"ngIf","ngIfElse"]],template:function(t,i){if(t&1){let o=b();r(0,"div",10,0),h("click",function(v){return d(o),_(i.onContainerClick(v))}),g(2,ti,2,23,"input",11)(3,ri,3,2,"ng-container",12)(4,_i,6,27,"ul",13)(5,yi,3,2,"ng-container",12)(6,Ii,4,5,"button",14),r(7,"p-overlay",15,1),A("visibleChange",function(v){return d(o),O(i.overlayVisible,v)||(i.overlayVisible=v),_(v)}),h("onAnimationStart",function(v){return d(o),_(i.onOverlayAnimationStart(v))})("onHide",function(){return d(o),_(i.hide())}),r(9,"div",16),g(10,Ti,1,0,"ng-container",17)(11,Li,4,10,"p-scroller",18)(12,Fi,2,6,"ng-container",12)(13,Wi,4,7,"ng-template",null,2,Xe)(15,Ui,1,0,"ng-container",17),a(),r(16,"span",19),m(17),a()()()}t&2&&(oe(i.styleClass),s("ngClass",i.containerClass)("ngStyle",i.style),p(2),s("ngIf",!i.multiple),p(),s("ngIf",i.isVisibleClearIcon),p(),s("ngIf",i.multiple),p(),s("ngIf",i.loading),p(),s("ngIf",i.dropdown),p(),T("visible",i.overlayVisible),s("options",i.overlayOptions)("target","@parent")("appendTo",i.appendTo)("showTransitionOptions",i.showTransitionOptions)("hideTransitionOptions",i.hideTransitionOptions),p(2),oe(i.panelStyleClass),s("ngClass",i.panelClass)("ngStyle",i.panelStyles),p(),s("ngTemplateOutlet",i.headerTemplate),p(),s("ngIf",i.virtualScroll),p(),s("ngIf",!i.virtualScroll),p(3),s("ngTemplateOutlet",i.footerTemplate),p(2),le(" ",i.selectedMessageText," "))},dependencies:()=>[tt,it,ue,ot,nt,xt,z,he,Ct,bt,yt,ze,ke,Ve,Fe],styles:[`@layer primeng{.p-autocomplete{display:inline-flex;position:relative}.p-autocomplete-loader{position:absolute;top:50%;margin-top:-.5rem}.p-autocomplete-dd .p-autocomplete-input{flex:1 1 auto;width:1%}.p-autocomplete-dd .p-autocomplete-input,.p-autocomplete-dd .p-autocomplete-multiple-container{border-top-right-radius:0;border-bottom-right-radius:0}.p-autocomplete-dd .p-autocomplete-dropdown{border-top-left-radius:0;border-bottom-left-radius:0}.p-autocomplete-panel{overflow:auto}.p-autocomplete-items{margin:0;padding:0;list-style-type:none}.p-autocomplete-item{cursor:pointer;white-space:nowrap;position:relative;overflow:hidden}.p-autocomplete-multiple-container{margin:0;padding:0;list-style-type:none;cursor:text;overflow:hidden;display:flex;align-items:center;flex-wrap:wrap}.p-autocomplete-token{width:fit-content;cursor:default;display:inline-flex;align-items:center;flex:0 0 auto}.p-autocomplete-token-icon{display:flex;cursor:pointer}.p-autocomplete-input-token{flex:1 1 auto;display:inline-flex}.p-autocomplete-input-token input{border:0 none;outline:0 none;background-color:transparent;margin:0;padding:0;box-shadow:none;border-radius:0;width:100%}.p-fluid .p-autocomplete{display:flex}.p-fluid .p-autocomplete-dd .p-autocomplete-input{width:1%}.p-autocomplete-clear-icon{position:absolute;top:50%;margin-top:-.5rem;cursor:pointer}.p-autocomplete-clearable{position:relative}}
`],encapsulation:2,changeDetection:0})}return n})(),Dt=(()=>{class n{static \u0275fac=function(t){return new(t||n)};static \u0275mod=se({type:n});static \u0275inj=ae({imports:[G,De,_e,Q,Me,ge,Ge,Le,ze,ke,Ve,Fe,De,Me,Ge,Le]})}return n})();var we=class n{constructor(l){this.alumnsService=l}selectedAlumn=new x;clearAfterSelect=!1;exclutions=[];exclutionsChange=new x;alumn=null;suggestedAlumns=[];filterAlumn(l){this.getSuggestedAlumns(l.query)}getSuggestedAlumns(l=""){this.alumnsService.suggestedAlumns(l,this.exclutions).subscribe({next:e=>{this.suggestedAlumns=e}})}onAlumnSelected(l){this.selectedAlumn.emit(l.value),this.clearAfterSelect&&(this.alumn=null)}static \u0275fac=function(e){return new(e||n)(f(ye))};static \u0275cmp=L({type:n,selectors:[["app-search-alumns"]],inputs:{clearAfterSelect:"clearAfterSelect",exclutions:"exclutions"},outputs:{selectedAlumn:"selectedAlumn",exclutionsChange:"exclutionsChange"},standalone:!0,features:[H],decls:1,vars:2,consts:[["placeholder","Busca alumnos","optionLabel","names","optionValue","alumn_id",1,"w-full",3,"ngModelChange","completeMethod","onSelect","ngModel","suggestions"]],template:function(e,t){e&1&&(r(0,"p-autoComplete",0),A("ngModelChange",function(o){return O(t.alumn,o)||(t.alumn=o),o}),h("completeMethod",function(o){return t.filterAlumn(o)})("onSelect",function(o){return t.onAlumnSelected(o)}),a()),e&2&&(T("ngModel",t.alumn),s("suggestions",t.suggestedAlumns))},dependencies:[Dt,Ke,G,$,ce,me]})};var Ji=()=>({width:"50rem"}),Gt=()=>({standalone:!0});function Yi(n,l){n&1&&(r(0,"tr")(1,"th"),m(2,"Nombres"),a(),r(3,"th"),m(4,"Apellidos"),a(),r(5,"th"),m(6,"Acciones"),a()())}function en(n,l){if(n&1){let e=b();r(0,"tr")(1,"td"),m(2),a(),r(3,"td"),m(4),a(),r(5,"td")(6,"p-button",30),h("click",function(){let i=d(e).rowIndex,o=u();return _(o.removeAlumn(i))}),a()()()}if(n&2){let e=l.$implicit;p(2),I(e.names),p(2),I(e.last_names)}}function tn(n,l){n&1&&(r(0,"tr")(1,"td",31),m(2,"Registra los alumnos que formar\xE1n parte de este grupo."),a()())}function nn(n,l){n&1&&(r(0,"tr")(1,"th"),m(2,"Nombre"),a(),r(3,"th"),m(4,"Valor"),a(),r(5,"th"),m(6,"Acciones"),a()())}function on(n,l){if(n&1){let e=b();r(0,"tr")(1,"td"),m(2),a(),r(3,"td"),m(4),a(),r(5,"td")(6,"p-button",30),h("click",function(){let i=d(e).rowIndex,o=u();return _(o.removeCriterion(i))}),a()()()}if(n&2){let e=l.$implicit;p(2),I(e.name),p(2),I(e.value)}}function ln(n,l){if(n&1&&(r(0,"tr")(1,"td",31),m(2),a()()),n&2){let e=u();p(2),le("Valor total del grupo: ",e.getCriteriaSum()," ")}}function rn(n,l){n&1&&(r(0,"tr")(1,"td",31),m(2,"Registra los criterios de evaluaci\xF3n para este grupo."),a()())}var Se=class n{constructor(l,e,t){this.groupsService=l;this.fb=e;this.messageService=t;this.groupForm=this.fb.group({name:new j("",[N.required,N.maxLength(50)]),grade:new j("",[N.required,N.maxLength(50)]),alumns:this.fb.array([]),criteria:this.fb.array([])})}successOnCreation=new x;groupForm;alumnList=[];idsAddedAlumns=[];showCreateAlumnDialog=!1;currentStep=0;newCriterionName="";newCriterionValue=0;steps=[{title:"Datos del Grupo",content:"Ingresa el nombre y grado del grupo."},{title:"Alumnos",content:"Asigna los alumnos al grupo."},{title:"Define un criterio",content:"Define el criterio de evauacion para los alumnos. La suma de el valor los criterios tiene que ser de 100"},{title:"Confirmaci\xF3n",content:"Revisa y confirma la creaci\xF3n del grupo."}];goToNextStep(){this.currentStep<this.steps.length-1&&this.currentStep++}onSubmit(){this.groupsService.insertGroup(this.groupForm.value).subscribe({next:l=>{this.messageService.add({severity:"success",summary:"Exito",detail:"Grupo creado exitosamente",life:3e3}),this.showCreateAlumnDialog=!1,this.successOnCreation.emit(!0),this.groupForm.reset()}})}goToPreviousStep(){this.currentStep>0&&this.currentStep--}getTransform(){return`translateX(-${100/this.steps.length*this.currentStep}%)`}getCriteriaSum(){return this.groupForm.get("criteria").controls.reduce((e,t)=>e+Number(t.value.value||0),0)}addAlumn(l){this.groupForm.get("alumns").push(this.fb.group({alumn_id:new j(l.alumn_id,[N.required]),names:new j(l.names,[N.required]),last_names:new j(l.last_names,[N.required])})),this.idsAddedAlumns=[...this.idsAddedAlumns,l.alumn_id]}addCriterion(l){this.groupForm.get("criteria").push(this.fb.group({name:new j(l.name,[N.required]),value:new j(l.value,[N.required])})),this.newCriterionName="",this.newCriterionValue=0}removeAlumn(l){let e=this.groupForm.get("alumns"),t=e.at(l).get("alumn_id").value;e.removeAt(l),this.idsAddedAlumns=this.idsAddedAlumns.filter(i=>i!==t)}removeCriterion(l){this.groupForm.get("criteria").removeAt(l)}get alumns(){return this.groupForm.get("alumns")}get criteria(){return this.groupForm.get("criteria")}getAlumnsAsArray(){return this.alumns.value}getCriteriaAsArray(){return this.criteria.value}static \u0275fac=function(e){return new(e||n)(f(ee),f(ht),f(M))};static \u0275cmp=L({type:n,selectors:[["app-create-group"]],outputs:{successOnCreation:"successOnCreation"},standalone:!0,features:[H],decls:56,vars:19,consts:[["pButton","","icon","pi pi-plus","label","Crear Grupo",1,"p-button-success","mr-2",3,"click"],[3,"formGroup"],["header","Crear Grupo",3,"visibleChange","modal","visible","closable","maximizable"],[1,"mt-0"],[1,"field","mb-4"],["for","nombre_grupo"],["id","nombre_grupo","formControlName","name","type","text","pInputText","",1,"w-full"],["for","grado"],["id","grado","formControlName","grade","type","text","pInputText","",1,"w-full"],[1,"mt-4"],["for","alumnos"],["id","alumnos",1,"w-full"],["id","alumnos",3,"selectedAlumn","exclutionsChange","exclutions","clearAfterSelect"],[1,"field"],["responsiveLayout","scroll",3,"value"],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],[1,"field","mt-2"],["for","crear_alumno"],[1,"formgroup-inline"],["for","criteriaName"],["id","criteriaName",1,"p-inputtext","p-component",3,"ngModelChange","ngModel","ngModelOptions"],["for","criteriaValue"],["id","criteriaValue","type","number",1,"p-inputtext","p-component",3,"ngModelChange","ngModel","ngModelOptions"],["label","Guardar Criterio","icon","pi pi-save",3,"click"],["pTemplate","footer"],[1,"flex","justify-content-end","mt-3"],["type","button","pButton","","label","Cancelar","icon","pi pi-times",1,"p-button-secondary","mr-2",3,"click"],["type","button","pButton","","label","Guardar","icon","pi pi-check",1,"p-button-success",3,"click","disabled"],["label","Eliminar","severity","danger",3,"click"],["colspan","3"]],template:function(e,t){e&1&&(r(0,"button",0),h("click",function(){return t.showCreateAlumnDialog=!0}),a(),r(1,"form",1)(2,"div")(3,"p-dialog",2),A("visibleChange",function(o){return O(t.showCreateAlumnDialog,o)||(t.showCreateAlumnDialog=o),o}),r(4,"h3",3),m(5,"Nombre y Grado del Grupo"),a(),C(6,"hr"),r(7,"div",4)(8,"label",5),m(9,"Nombre del Grupo"),a(),C(10,"input",6),a(),r(11,"div",4)(12,"label",7),m(13,"Grado"),a(),C(14,"input",8),a(),r(15,"h3",9),m(16,"Agregar Alumnos"),a(),C(17,"hr"),r(18,"div",4)(19,"label",10),m(20,"Buscador de Alumnos"),a(),r(21,"div",11)(22,"app-search-alumns",12),h("selectedAlumn",function(o){return t.addAlumn(o)}),A("exclutionsChange",function(o){return O(t.idsAddedAlumns,o)||(t.idsAddedAlumns=o),o}),a()()(),r(23,"div",13)(24,"p-table",14),g(25,Yi,7,0,"ng-template",15)(26,en,7,2,"ng-template",16)(27,tn,3,0,"ng-template",17),a()(),r(28,"div",18)(29,"label",19),m(30,"\xBFFalta alg\xFAn alumno? "),r(31,"strong"),m(32,"Cr\xE9alo"),a()(),C(33,"br")(34,"app-create-alumn"),a(),r(35,"h3",9),m(36,"Crear Criterios"),a(),C(37,"hr"),r(38,"div",20)(39,"div",13)(40,"label",21),m(41,"Nombre del criterio"),a(),r(42,"input",22),A("ngModelChange",function(o){return O(t.newCriterionName,o)||(t.newCriterionName=o),o}),a()(),r(43,"div",13)(44,"label",23),m(45,"Valor"),a(),r(46,"input",24),A("ngModelChange",function(o){return O(t.newCriterionValue,o)||(t.newCriterionValue=o),o}),a()(),r(47,"p-button",25),h("click",function(){return t.addCriterion({name:t.newCriterionName,value:t.newCriterionValue})}),a()(),r(48,"p-table",14),g(49,nn,7,0,"ng-template",15)(50,on,7,2,"ng-template",16)(51,ln,3,1,"ng-template",26)(52,rn,3,0,"ng-template",17),a(),r(53,"div",27)(54,"button",28),h("click",function(){return t.showCreateAlumnDialog=!1}),a(),r(55,"button",29),h("click",function(){return t.onSubmit()}),a()()()()()),e&2&&(p(),s("formGroup",t.groupForm),p(2),B(E(16,Ji)),s("modal",!0),T("visible",t.showCreateAlumnDialog),s("closable",!0)("maximizable",!0),p(19),T("exclutions",t.idsAddedAlumns),s("clearAfterSelect",!0),p(2),s("value",t.getAlumnsAsArray()),p(18),T("ngModel",t.newCriterionName),s("ngModelOptions",E(17,Gt)),p(4),T("ngModel",t.newCriterionValue),s("ngModelOptions",E(18,Gt)),p(2),s("value",t.getCriteriaAsArray()),p(7),s("disabled",t.alumns.length==0||t.getCriteriaSum()!=100||t.groupForm.invalid))},dependencies:[te,fe,z,Q,he,X,_e,ft,ie,vt,de,mt,ut,dt,ce,ct,_t,gt,Y,J,G,wt,we,$,me,Vt],styles:['@charset "UTF-8";.form-container[_ngcontent-%COMP%]{display:flex;transition:transform .5s ease-in-out}.step[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;text-align:center;padding:2rem}']})};var pn=()=>({"1199px":"75vw","575px":"90vw"}),un=()=>({width:"450px"}),cn=()=>({"min-width":"50rem"});function mn(n,l){n&1&&(r(0,"tr")(1,"th"),m(2,"Nombres"),a(),r(3,"th"),m(4,"Apellidos"),a(),r(5,"th"),m(6,"Acciones"),a()())}function dn(n,l){if(n&1){let e=b();r(0,"tr")(1,"td"),m(2),a(),r(3,"td"),m(4),a(),r(5,"td")(6,"app-obvservations",7),A("alumnChange",function(i){let o=d(e).rowIndex,c=u(2);return O(c.alumnsInGroup[o],i)||(c.alumnsInGroup[o]=i),_(i)}),a(),r(7,"p-button",8),h("onClick",function(){let i=d(e).$implicit,o=u(2);return _(o.deleteAlumnFormGroup(i.alumn_id))}),a()()()}if(n&2){let e=l.$implicit,t=l.rowIndex,i=u(2);p(2),I(e.names),p(2),I(e.last_names),p(2),T("alumn",i.alumnsInGroup[t]),s("selfSave",!0)}}function _n(n,l){n&1&&(r(0,"tr")(1,"td",9),m(2,"No hay estudiantes inscritos en este grupo"),a()())}function gn(n,l){if(n&1){let e=b();r(0,"p-table",3),h("onLazyLoad",function(i){d(e);let o=u();return _(o.loadTable(i))}),g(1,mn,7,0,"ng-template",4)(2,dn,8,4,"ng-template",5)(3,_n,3,0,"ng-template",6),a()}if(n&2){let e=u();s("tableStyle",E(3,cn))("value",e.alumnsInGroup)("lazy",!0)}}var Ie=class n{constructor(l,e,t,i){this.alumnsService=l;this.confirmationService=e;this.groupsService=t;this.messageService=i}alumnsInGroup=[];alumnsNotInGroup=[];lastEvent={};showDialog=!1;selectedGroupId=0;showDialogChange=new x;successOnDelete=new x;loadTable(l){this.lastEvent=l,this.groupsService.alumnsInGroup(this.selectedGroupId).subscribe({next:e=>{this.alumnsInGroup=e},error:e=>console.error("Error fetching alumns:",e)})}deleteAlumnFormGroup(l){this.confirmationService.confirm({message:"Estas seguro de eliminar a los alumnos seleccionados?",header:"Confirmacion",icon:"pi pi-exclamation-triangle",accept:()=>{this.groupsService.deleteAlumnFromGroup(l,this.selectedGroupId).subscribe({next:()=>{this.messageService.add({severity:"success",summary:"Exito",detail:"Alumno eliminado del grupo",life:3e3}),this.loadTable(this.lastEvent),this.successOnDelete.emit(!0)}})}})}static \u0275fac=function(e){return new(e||n)(f(ye),f(U),f(ee),f(M))};static \u0275cmp=L({type:n,selectors:[["app-manage-alumns-group-dialog"]],inputs:{showDialog:"showDialog",selectedGroupId:"selectedGroupId"},outputs:{showDialogChange:"showDialogChange",successOnDelete:"successOnDelete"},standalone:!0,features:[Z([M,U]),H],decls:5,vars:8,consts:[["header","Alumnos en este grupo",3,"visibleChange","onHide","visible","modal","breakpoints"],[1,"card"],["responsiveLayout","stack","responsiveLayout","scroll",3,"tableStyle","value","lazy","onLazyLoad",4,"ngIf"],["responsiveLayout","stack","responsiveLayout","scroll",3,"onLazyLoad","tableStyle","value","lazy"],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],[3,"alumnChange","alumn","selfSave"],["label","Eliminar","severity","danger",1,"ml-2",3,"onClick"],["colspan","3"]],template:function(e,t){e&1&&(C(0,"p-toast"),r(1,"p-dialog",0),A("visibleChange",function(o){return O(t.showDialog,o)||(t.showDialog=o),o}),h("onHide",function(){return t.showDialogChange.emit(!1)}),r(2,"div",1),g(3,gn,4,4,"p-table",2),a()(),C(4,"p-confirmDialog")),e&2&&(p(),T("visible",t.showDialog),s("modal",!0)("breakpoints",E(6,pn)),p(2),s("ngIf",t.showDialog),p(),B(E(7,un)))},dependencies:[te,fe,z,G,ue,Y,J,Q,X,At,be,xe,ie,Ce]})};var hn=()=>({"min-width":"50rem"}),fn=()=>({width:"450px"});function Cn(n,l){if(n&1){let e=b();r(0,"app-create-group",8),h("successOnCreation",function(){d(e);let i=u();return _(i.loadTable(i.lastTableEvent))}),a(),r(1,"p-button",9),h("click",function(){d(e);let i=u();return _(i.deleteSelectedGroups())}),a()}if(n&2){let e=u();p(),s("disabled",!e.selectedGroups||!e.selectedGroups.length)}}function yn(n,l){n&1&&(r(0,"tr")(1,"th",10),C(2,"p-tableHeaderCheckbox"),a(),r(3,"th"),m(4,"Nombre del grupo"),a(),r(5,"th"),m(6,"Grado"),a(),r(7,"th"),m(8,"Alumnos Inscritos"),a(),r(9,"th"),m(10,"Acciones"),a()())}function xn(n,l){if(n&1){let e=b();r(0,"tr")(1,"td"),C(2,"p-tableCheckbox",11),a(),r(3,"td"),m(4),a(),r(5,"td"),m(6),a(),r(7,"td"),C(8,"p-tag",12),a(),r(9,"td")(10,"p-button",13),h("onClick",function(){let i=d(e).$implicit,o=u();return _(o.showManageAlumnsDialog=o.selectedGroup=i.group_id)}),a()()()}if(n&2){let e=l.$implicit;p(2),s("value",e),p(2),I(e.name),p(2),I(e.grade),p(2),s("value",e.alumn_count)("severity",e.alumn_count===0?"danger":"success")}}function bn(n,l){n&1&&(r(0,"tr")(1,"td",14),m(2,"No cuentas con ningun grupo registrado."),a()())}var Te=class n{constructor(l,e,t){this.groupsService=l;this.messageService=e;this.confirmationService=t}lastTableEvent={};groups=[];selectedGroups=[];selectedGroup=0;showDeleteDialog=!1;showManageAlumnsDialog=!1;loadTable(l){this.lastTableEvent=l,this.groupsService.getGroups().subscribe({next:e=>{this.groups=e}})}deleteSelectedGroups(){this.confirmationService.confirm({message:"Estas seguro de eliminar a los alumnos seleccionados?",header:"Confirmacion",icon:"pi pi-exclamation-triangle",accept:()=>{this.groups=this.groups.filter(l=>!this.selectedGroups.includes(l)),this.selectedGroups=[],this.messageService.add({severity:"success",summary:"Exito",detail:"Alumnos eliminados de manera satisfactoria",life:3e3})}})}static \u0275fac=function(e){return new(e||n)(f(ee),f(M),f(U))};static \u0275cmp=L({type:n,selectors:[["app-groups-list"]],standalone:!0,features:[Z([M,U]),H],decls:10,vars:10,consts:[[1,"card"],["styleClass","mb-4 gap-2"],["pTemplate","left"],["responsiveLayout","scroll","responsiveLayout","stack",3,"onLazyLoad","selectionChange","value","lazy","selection","tableStyle"],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],[3,"showDialogChange","successOnDelete","showDialog","selectedGroupId"],[3,"successOnCreation"],["label","Eliminar grupos","severity","danger","icon","pi pi-trash",3,"click","disabled"],[2,"width","4rem"],[3,"value"],[3,"value","severity"],["label","Administrar alumnos",3,"onClick"],["colspan","5"]],template:function(e,t){e&1&&(C(0,"p-toast"),r(1,"div",0)(2,"p-toolbar",1),g(3,Cn,2,1,"ng-template",2),a(),r(4,"p-table",3),h("onLazyLoad",function(o){return t.loadTable(o)}),A("selectionChange",function(o){return O(t.selectedGroups,o)||(t.selectedGroups=o),o}),g(5,yn,11,0,"ng-template",4)(6,xn,11,5,"ng-template",5)(7,bn,3,0,"ng-template",6),a()(),C(8,"p-confirmDialog"),r(9,"app-manage-alumns-group-dialog",7),A("showDialogChange",function(o){return O(t.showManageAlumnsDialog,o)||(t.showManageAlumnsDialog=o),o}),h("successOnDelete",function(){return t.loadTable(t.lastTableEvent)}),a()),e&2&&(p(4),s("value",t.groups)("lazy",!0),T("selection",t.selectedGroups),s("tableStyle",E(8,hn)),p(4),B(E(9,fn)),p(),T("showDialog",t.showManageAlumnsDialog),s("selectedGroupId",t.selectedGroup))},dependencies:[Y,J,z,St,It,te,ge,Q,X,ie,Ce,Mt,Et,G,$,de,Lt,be,xe,Se,Ot,Tt,Ie]})};var vn=[{path:"list",component:Te}],Bt=class n{static \u0275fac=function(e){return new(e||n)};static \u0275mod=se({type:n});static \u0275inj=ae({providers:[M],imports:[Ee.forChild(vn),Ee]})};export{Bt as GroupsRoutingModule};
