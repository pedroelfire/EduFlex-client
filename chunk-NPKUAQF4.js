import{a as de,b as fe,c as ve,d as _e,e as be}from"./chunk-XRG5JRTB.js";import{i as ne,j as ie,k as oe,l as ae,r as re,s as me,t as ce,u as pe,v as ue}from"./chunk-HQ4YH6WS.js";import"./chunk-V77BDGZ6.js";import{f as le,g as se}from"./chunk-KOFPKAN7.js";import{C as g,H as K,ca as Y,da as J,ha as Q,ia as Z,na as $,oa as ee,pa as te,t as D,y as A}from"./chunk-2W3LPREW.js";import{$a as v,Ab as R,Bb as j,Cb as B,Db as X,Eb as q,Fb as O,Ka as d,La as C,P as N,Y as H,Ya as k,Z as W,cb as P,ea as w,fa as x,fb as s,gb as m,hb as y,lb as E,mb as S,nb as _,wb as b,wc as G,xb as F}from"./chunk-2GPZ5EYJ.js";import{d as xe,f as Se}from"./chunk-GAL4ENT6.js";var ye=xe((U,I)=>{"use strict";(function(r,i){typeof define=="function"&&define.amd?define([],i):typeof U<"u"?i():(i(),r.FileSaver={})})(U,function(){"use strict";function r(t,o){return typeof o>"u"?o={autoBom:!1}:typeof o!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),o={autoBom:!o}),o.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(t.type)?new Blob(["\uFEFF",t],{type:t.type}):t}function i(t,o,u){var a=new XMLHttpRequest;a.open("GET",t),a.responseType="blob",a.onload=function(){f(a.response,o,u)},a.onerror=function(){console.error("could not download file")},a.send()}function e(t){var o=new XMLHttpRequest;o.open("HEAD",t,!1);try{o.send()}catch{}return 200<=o.status&&299>=o.status}function l(t){try{t.dispatchEvent(new MouseEvent("click"))}catch{var o=document.createEvent("MouseEvents");o.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(o)}}var n=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof global=="object"&&global.global===global?global:void 0,c=n.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),f=n.saveAs||(typeof window!="object"||window!==n?function(){}:"download"in HTMLAnchorElement.prototype&&!c?function(t,o,u){var a=n.URL||n.webkitURL,p=document.createElement("a");o=o||t.name||"download",p.download=o,p.rel="noopener",typeof t=="string"?(p.href=t,p.origin===location.origin?l(p):e(p.href)?i(t,o,u):l(p,p.target="_blank")):(p.href=a.createObjectURL(t),setTimeout(function(){a.revokeObjectURL(p.href)},4e4),setTimeout(function(){l(p)},0))}:"msSaveOrOpenBlob"in navigator?function(t,o,u){if(o=o||t.name||"download",typeof t!="string")navigator.msSaveOrOpenBlob(r(t,u),o);else if(e(t))i(t,o,u);else{var a=document.createElement("a");a.href=t,a.target="_blank",setTimeout(function(){l(a)})}}:function(t,o,u,a){if(a=a||open("","_blank"),a&&(a.document.title=a.document.body.innerText="downloading..."),typeof t=="string")return i(t,o,u);var p=t.type==="application/octet-stream",we=/constructor/i.test(n.HTMLElement)||n.safari,V=/CriOS\/[\d]+/.test(navigator.userAgent);if((V||p&&we||c)&&typeof FileReader<"u"){var L=new FileReader;L.onloadend=function(){var h=L.result;h=V?h:h.replace(/^data:[^;]*;/,"data:attachment/file;"),a?a.location.href=h:location=h,a=null},L.readAsDataURL(t)}else{var z=n.URL||n.webkitURL,M=z.createObjectURL(t);a?a.location=M:location.href=M,a=null,setTimeout(function(){z.revokeObjectURL(M)},4e4)}});n.saveAs=f.saveAs=f,typeof I<"u"&&(I.exports=f)})});var ge=Se(ye());var Ee=()=>({"min-width":"50rem"}),Ae=()=>({width:"450px"});function Te(r,i){if(r&1){let e=E();s(0,"app-create-alumn",8),S("successOnCreation",function(){w(e);let n=_();return x(n.loadTable(n.lastTableEvent))}),m(),s(1,"p-button",9),S("click",function(){w(e);let n=_();return x(n.deleteSelectedAlumns())}),m()}if(r&2){let e=_();d(),v("disabled",!e.selectedAlumns||!e.selectedAlumns.length)}}function Le(r,i){if(r&1){let e=E();y(0,"p-fileUpload",10),s(1,"button",11),S("click",function(){w(e);let n=_();return x(n.exportExcel())}),m()}r&2&&v("maxFileSize",1e6)}function Me(r,i){r&1&&(s(0,"tr")(1,"th",12),y(2,"p-tableHeaderCheckbox"),m(),s(3,"th"),b(4,"Nombres"),m(),s(5,"th"),b(6,"Apellidos"),m(),s(7,"th"),b(8,"Acciones"),m()())}function ke(r,i){if(r&1){let e=E();s(0,"tr")(1,"td"),y(2,"p-tableCheckbox",13),m(),s(3,"td"),b(4),m(),s(5,"td"),b(6),m(),s(7,"td")(8,"app-obvservations",14),B("alumnChange",function(n){let c=w(e).rowIndex,f=_();return j(f.alumns[c],n)||(f.alumns[c]=n),x(n)}),m()()()}if(r&2){let e=i.$implicit,l=i.rowIndex,n=_();d(2),v("value",e),d(2),F(e.names),d(2),F(e.last_names),d(2),v("selfSave",!0),R("alumn",n.alumns[l])}}function Fe(r,i){r&1&&(s(0,"tr")(1,"td",15),b(2,"No cuentas con ningun alumno registrado."),m()())}var T=class r{constructor(i,e,l){this.alumnsService=i;this.confirmationService=e;this.messageService=l}alumns=[];selectedAlumns=[];lastTableEvent={};mostrarDialogoEliminar=!1;loadTable(i){this.lastTableEvent=i,this.alumnsService.getAlumn().subscribe({next:e=>{this.alumns=e}})}deleteSelectedAlumns(){this.confirmationService.confirm({message:"Estas seguro de eliminar a los alumnos seleccionados?",header:"Confirmacion",icon:"pi pi-exclamation-triangle",accept:()=>{let i=this.selectedAlumns.map(e=>e.alumn_id);this.alumnsService.deleteAlumns(i).subscribe({next:()=>{this.alumns=this.alumns.filter(e=>!i.includes(e.alumn_id)),this.messageService.add({severity:"success",summary:"Exito",detail:"Alumnos eliminados de manera satisfactoria",life:3e3})},error:()=>{this.messageService.add({severity:"error",summary:"Error",detail:"Ocurrio un error al eliminar los alumnos",life:3e3})}})}})}exportExcel(){import("./chunk-4AENLENH.js").then(i=>{let l={Sheets:{data:i.utils.json_to_sheet(this.alumns)},SheetNames:["data"]},n=i.write(l,{bookType:"xlsx",type:"array"});this.saveAsExcelFile(n,"alumnos_registrados")})}saveAsExcelFile(i,e){let l="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8",n=".xlsx",c=new Blob([i],{type:l});ge.saveAs(c,e+"_export_"+new Date().getTime()+n)}static \u0275fac=function(e){return new(e||r)(C(me),C(A),C(g))};static \u0275cmp=H({type:r,selectors:[["app-alumns-list"]],standalone:!0,features:[X([g,A]),q],decls:10,vars:8,consts:[[1,"card"],["styleClass","mb-4 gap-2"],["pTemplate","left"],["pTemplate","right"],["responsiveLayout","scroll","responsiveLayout","stack",3,"onLazyLoad","selectionChange","value","lazy","selection","tableStyle"],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],[3,"successOnCreation"],["label","Eliminar alumnos","severity","danger","icon","pi pi-trash",3,"click","disabled"],["mode","basic","accept","image/*","label","Importar","chooseLabel","Importar",1,"mr-2","inline-block",3,"maxFileSize"],["pButton","","pRipple","","label","Exportar","icon","pi pi-file-excel",1,"p-button-help",3,"click"],[2,"width","4rem"],[3,"value"],[3,"alumnChange","selfSave","alumn"],["colspan","3"]],template:function(e,l){e&1&&(y(0,"p-toast"),s(1,"div",0)(2,"p-toolbar",1),k(3,Te,2,1,"ng-template",2)(4,Le,2,1,"ng-template",3),m(),s(5,"p-table",4),S("onLazyLoad",function(c){return l.loadTable(c)}),B("selectionChange",function(c){return j(l.selectedAlumns,c)||(l.selectedAlumns=c),c}),k(6,Me,9,0,"ng-template",5)(7,ke,9,5,"ng-template",6)(8,Fe,3,0,"ng-template",7),m()(),y(9,"p-confirmDialog")),e&2&&(d(5),v("value",l.alumns)("lazy",!0),R("selection",l.selectedAlumns),v("tableStyle",O(6,Ee)),d(4),P(O(7,Ae)))},dependencies:[ae,ne,K,ie,oe,re,Z,Q,te,$,ee,se,le,ue,pe,G,Y,J,de,ve,fe,be,_e,ce]})};var Re=[{path:"list",component:T}],he=class r{static \u0275fac=function(e){return new(e||r)};static \u0275mod=W({type:r});static \u0275inj=N({providers:[g],imports:[D.forChild(Re),D]})};export{he as AlumnsRoutingModule};
